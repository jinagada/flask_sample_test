{% extends "bootstrap/base.html" %}
{% block title %}Sample Test{% endblock %}
{% block styles %}
  {{ super() }}
  <!-- bootstrap datetimepicker -->
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.47/css/bootstrap-datetimepicker.min.css"/>
{% endblock %}
{% block content %}
<div class="container" style="width: auto">
  <!-- 메뉴바 : START -->
  {% include 'includes/_navbar.html' %}
  <!-- 메뉴바 : END -->
  <!-- 제목 : START -->
  <div class="row">
    <div class="col-md-12">
      <div class="page-header">
        <h1>사용자 목록</h1>
      </div>
    </div>
  </div>
  <!-- 제목 : END -->
  <!-- 사용자 목록 : START -->
  <div class="row">
    <div class="col-md-12">
      <table class="table">
        <thead>
        <tr>
          <th scope="col">#</th>
          <th scope="col">아이디</th>
          <th scope="col">비밀번호</th>
          <th scope="col">이름</th>
          <th scope="col">등록일</th>
          <th scope="col">수정일시</th>
        </tr>
        </thead>
        <tbody>
        {% for user in user_list %}
          <tr>
            <td>{{ loop.index + (page_num - 1) * row_per_page }}</td>
            <td>{{ user['USER_ID'] }}</td>
            <td>{{ user['USER_PW'] }}</td>
            <td>{{ user['USER_NAME'] }}</td>
            <td>{{ user['RDATE']|formatdtuser('%Y.%m.%d') }}</td>
            <td>{{ user['MDATE']|formatdtuser('%Y.%m.%d %H:%M:%S') }}</td>
          </tr>
        {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
  <!-- 사용자 목록 : END -->
  <!-- Paging : START -->
  <div class="row">
    <div class="col-md-12 text-center">
      {% include 'includes/_paging.html' %}
    </div>
  </div>
  <!-- Paging : END -->
  <!-- Button : START -->
  <div class="row">
    <div class="col-md-12 text-right">
      <button class="btn btn-primary" type="button" data-toggle="modal" data-target="#saveUserModal">사용자 등록</button>
    </div>
  </div>
  <!-- Button : END -->
  {% include 'user/_save_user_modal.html' %}
</div>
{% endblock %}
<!-- javascript 영역 -->
{% block scripts %}
  {{ super() }}
  <script type="text/javascript">
      $(document).ready(function () {
          $('#goSaveUser').click(function (e) {
              if ($('#user_id').val() === '') {
                  alert('아이디를 입력 해 주세요.');
                  $('#user_id').focus();
                  return;
              }
              if ($('#user_pw').val() === '') {
                  alert('비밀번호를 입력 해 주세요.');
                  $('#user_pw').focus();
                  return;
              }
              if ($('#user_name').val() === '') {
                  alert('이름을 입력 해 주세요.');
                  $('#user_name').focus();
                  return;
              }
              $.post($('#saveUserForm')[0].action, $('#saveUserForm').serialize(), function(data) {
                  if (!data.is_success) {
                      alert('사용자 등록 시 오류가 발생 했습니다.');
                  }
              }).done(function() {
                  location.reload();
              });
          });
      });
  </script>
{% endblock %}
